这套程序我在开发板上验证过可行。
使用2个按键PB8 PB9 控制dac1(PA4)通道输出电压的增加与减小。
adc1通道10(PC0) 检测dac实际的输出电压。

另外3路adc 就检测电流采样的3个通道。

USART1 打印log
DacSetV:309; DacV:328; V1:1274; V2:2638; V3:2024
DacSetV:309; DacV:329; V1:1277; V2:2639; V3:2028
DacSetV:309; DacV:329; V1:1274; V2:2638; V3:2024
DacSetV:309; DacV:329; V1:1277; V2:2639; V3:2028
DacSetV:309; DacV:329; V1:1274; V2:2638; V3:2023

其中
dac实际设置值，adc采样到的dac的值， 通道1电压，通道2电压，通道3电压
DacSetV:309;   DacV:328;             V1:1274;    V2:2638;   V3:2024
































